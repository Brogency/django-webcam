{% load i18n static %}

<script src="{% static 'webcam/webcam.min.js' %}"></script>
<div id="camera" style="width:320px; height:240px;"></div>
<input type="hidden" name="{{ name }}" id="{{ attrs.id }}" value="{{ picture.name }}"/>
<input type="hidden" name="data_{{ name }}" id="data_{{ attrs.id }}" value="{{ picture.stream }}"/>
<div id="result"></div>

<script type="application/javascript">
    (function($) {
        $(function () {
            Webcam.attach('#camera');

            $('#take_snap').on('click', function () {
                Webcam.snap(function (data_uri) {
                    $('#result').html('<img src="' + data_uri + '" />');
                    $('#data_{{ attrs.id }}').val(data_uri);
                });
            });
            $('#clear_snap').on('click', function() {
                $('#result').html('<div></div>');
                $('#data_{{ attrs.id }}').val('');
            })
        });
    })(django.jQuery || $);
</script>
<input type="button" class="btn" id="take_snap" value='{% trans "Take snapshot" %}' />
<input type="button" class="btn" id="clear_snap" value='{% trans "Clear" %}' />
